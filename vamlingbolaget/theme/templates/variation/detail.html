{% extends "collection_base.html" %}
{% load i18n %}
{% load fb_versions %}
{% version model.field_name version_prefix %}
{%block title%}
    <title>Vamlingbolaget | {% trans "Kollektion" %} | {{ product.article.name }} {% trans "i" %} {{ product.color|lower }} {{ product.pattern|lower }} </title>
    <meta name="description" content={% trans "Vamlingbolaget kollektion " %} {{ product.article.name }} {% trans "i" %} {{ product.color|lower }} {{ product.pattern|lower }}" %}/>
{%endblock%}

{% block pagetitle %}
	<div class="row-fluid">
		<div class="span12" >
			<legend><a href="javascript:history.go(-1)">{% trans "Shop" %}</a> / {{ product.article.name }} </legend>
		</div>
{% endblock %}

{% block allcontent %}
	<div class="span12">
		<div class="span4 img_container article_background" id="fadeifchangeorder">
			{% for image in images %}
			 <a href="{% version image.image 'large'%}" data-lightbox="image-1" data-title="{{ product.article.name }} {% trans 'i' %} {{ product.color|lower }} {{ product.pattern|lower }}" >
				 <img src="{% version image.image 'large' %}" alt="{{ product.article.name }} {% trans 'i' %} {{ product.color|lower }} {{ product.pattern|lower }}" />
			 </a>
		
			<div id="art_description" class="image_description_detail"> - {{ product.article.description }} 
			
	        </div>

			{% endfor %}
		</div>
		<div class="span7">
			<span class="articlehead">
				<span id="articlename" >
					<input id="article_pk" type="hidden" value="{{ product.article.pk }}">
					{{ product.article.name }} 
					<small>	| 
						<span class="detailPrice">
							{%if product.article.discount%}
								<span class="discount"> {{ product.article.f_discount }} </span> :- * <br />
								<span class="smaller">({% trans "tidigare pris" %} </span>  
								<span id="the_price"> {{ product.article.price }} </span>    
								<span class="smaller"> :-) <br />
		   						* {{ product.article.discount.reason }} </span>
							{%else%}
							<span id="the_price"> {{ product.article.price }}</span> :-
							{%endif%}  
						</span>
						
					</small>
					<hr class="article_hr"> 
				</span>
			</span>	
			<div style="clear: both;"></div>
			<div>
				{% trans "Välj" %} {% trans "Färg" %} / {% trans "Mönster" %} : <span class="selectedpatternandcolor_text"> {{ product.color.name }} {{ product.pattern.name }} </span>
			</div> 
			<div style="clear: both;"></div>
		
			<hr/>					
			<!-- diffrence start patterns: -->
			<!-- if quality is Velour or Quilted -->
			<!-- hard coded change on server -->
			{% if product.article.quality.order == 4 %}
			<!-- hard coded change on server -->

				{% for color in colors %}
					<img src="{{ MEDIA_URL }}/uploads/120/{{ color.order }}f_{{ color.order }}m.jpg" style="width:100px;"  />
					<label class="radio inline">
						<input type="radio" name="radio" {%if color_id == color.order %} checked="checked" {%endif%}  id="radio_{{ color.order }}" value="{{ color.order }}" />
					</label>
				{% endfor %}
			
			<input id="hidden_colorpattern" type="hidden" value="">

			{%elif product.article.sku_number == '9805' %}	<!-- if article is the "Reversible zip jacket" -->
			<h5> Välj Utsidans mönster</h5>
			<div class="outside">
				<div class="selectedpatternandcolor span2">
					<img id="pattern_color_image" src="{{ MEDIA_URL }}/uploads/120/{{ product.color.order }}f_{{ product.pattern.order }}m.jpg" style="width:130px;" />
				
					
				</div>
				<div class="color_and_pattern_choose span5">
					{% for item in colorsandpattern %}
					<img src="/media/uploads/120/{{ item.color.order }}f_{{ item.pattern.order }}m.jpg" class="pattern_color_image" id="{{ item.color.order }}_{{ item.pattern.order }}_{{ item.color.name }}_{{ item.pattern.name }}">
					{% endfor  %}
				</div>
				<input type="hidden" id="pattern" name="pattern" value="{{ product.pattern.order }}" >
				<input type="hidden" id="color" name="color" value="{{ product.color.order }}">
				<div style="clear: both;"></div>
				<hr/>
			</div> 
			<h5> Välj Insidans mönster</h5>
				<div class="inside">
					<div id="selectedpatternandcolor_inside" class="selectedpatternandcolor_inside span2">
					<img id="pattern_color_image inside" src="{{ MEDIA_URL }}/uploads/120/{{ product.color.order }}f_{{ product.pattern.order }}m.jpg" style="width:130px;" />
					<br/>
					{{ product.color.name }} {{ product.pattern.name }}
					</div>
					<div class="color_and_pattern_choose span5">
						{% for item in colorsandpattern %}
							<img src="/media/uploads/120/{{ item.color.order }}f_{{ item.pattern.order }}m.jpg" class="pattern_color_image inside" id="{{ item.color.order }}_{{ item.pattern.order }}_{{ item.color.name }}_{{ item.pattern.name }}">
						{% endfor  %}
					</div>
					<input type="hidden" id="pattern2" name="pattern_2" value="{{ product.pattern.order }}" >
					<input type="hidden" id="color2" name="color_2" value="{{ product.color.order }}">
					<div style="clear: both;"></div>
				</div> 
			<!-- else if quality is Silky jersey or silkjersey-children etc -->
			<!-- hard coded change on server hot fix-->
			{% elif product.article.quality.order == 1 or product.article.quality.order == 2 or product.article.quality.order == 5 or product.article.quality.order == 9 or product.article.quality.order == 10 or product.article.quality.order == 14 or product.article.quality.order == 16 or product.article.quality.order == 17 or product.article.quality.order == 18 or product.article.quality.order == 19 %}
			<!-- hard coded change on server -->

				<div class="selectedpatternandcolor span2">
					<img id="pattern_color_image" src="{{ MEDIA_URL }}/uploads/120/{{ product.color.order }}f_{{ product.pattern.order }}m.jpg" style="width:130px;" />
					
				</div>
						<img src="/media/uploads/120/{{ item.color.order }}f_{{ item.pattern.order }}m.jpg" class="pattern_color_image" id="{{ item.color.order }}_{{ item.pattern.order }}_{{ item.color.name }}_{{ item.pattern.name }}">
					{% endfor  %}
				</div>
				<input type="hidden" id="pattern" name="pattern" value="{{ product.pattern.order }}" >
				<input type="hidden" id="color" name="color" value="{{ product.color.order }}">

				<div style="clear: both;"></div>
		
			<!-- else -->
			{% else %}

			<div class="selectedpatternandcolor span3">
				<span style="padding-left: 10px;">
					<img id="pattern_color_image" src="{{ MEDIA_URL }}/uploads/120/{{ product.color.order }}f_{{ product.pattern.order }}m.jpg" style="width:180px;"  /
				</span>
			</div>     

			<div class="selectedpatternandcolor span3">
				<select class="changonselect" id="color">
					{% for color in colors %}
						<option value="{{ color.order }}"
							{% if color.order == product.color.order %}
								selected="selected"
							{%endif%}
							">
						{% trans "Färg" %}: {{ color.name }} </option>
					{% endfor %}
				</select>
				<select class="changonselect" id='pattern'>
					{% for pattern in patterns %}
						<option value="{{ pattern.order }}"
						{% if pattern.order == product.pattern.order %}
							selected="selected"
						{%endif%}
						">
						 {{ pattern.name }}</option>
					{% endfor %}
				</select>

			</div>
			<div style="clear: both;"></div>
		
		{% endif %} <!-- end of endif patterns-->
		<hr>
	
		<!-- if type is Accessories & sheet or Piece-goods -->
		{%if product.article.type.order == 8 or product.article.type.order == 7 %}
			<!-- else show size  -->
	        <input type="hidden" id="quantity" name="quantity" value="1">
		{%else%}
			<div> 
             {% trans "Välj" %} .. 
			 {% for size in sizes %}
				<span  class="select_size {% if size.pk  == 3 %} size_active {%endif%}" id="{{ size.pk }}">{{ size.name }}</span>  | 
			 {% endfor %}
			</div>
			<input type="hidden" id="size" name="size" value="3" >
			<input type="hidden" id="quantity" name="quantity" value="1">
			<hr>
		{% endif %}

		<!-- if type is  Piece-goods (metervara) -->
		{% if product.article.type.order == 8 %}
			 {% trans "Välj" %} ..
				<span class="select_size" id="1"> 1 meter </span> | 
				<span class="select_size" id="2"> 2 meter </span> | 
				<span class="select_size" id="3"> 3 meter </span> | 
				<span class="select_size" id="4"> 4 meter </span> | 
				<span class="select_size" id="5"> 5 meter </span> | 
				<span class="select_size" id="6"> 6 meter </span> | 
			
				<input type="hidden" id="quantity" name="quantity" value="1">	
		{% else %}
			
		{% endif %}

			

		<!-- hard coded change on server hot fix-->
		{% if product.article.quality.order == 7 or product.article.quality.order == 6 %}

         <span style="padding-left: 10px;">  
               
				<img id="pattern_color_image" src="{{ MEDIA_URL }}/uploads/120/{{ product.color.order }}f_{{ product.pattern.order }}m.jpg" style="width:100px;"  />
      

			</span>
			<div style="clear: both;"></div>
			<hr/>
			<div id="select_text"> </div>

		<!-- hard coded change on server hot fix-->

		{%else%}
			<br/>		
		{% endif %}
		<div style="clear: both;"></div>
		<hr/>
		<div id="addtocart" style="display:block;">
			<span style="padding-left: 30px;">
				<button class="btn btn-success btn-block add-to-cart-buttom" style="z-index: 66" type="button"> {% trans "Lägg till i Shoppinglåda" %}</button>
			</span>
		</div>
		<div style="clear: both;"></div>
		<br>
		<div>
			<div class="pull-right"> | <span> {% trans "Art.Nr." %}: <span id="sku_number">{{ product.article.sku_number }}</span>
						<span>| {% trans "Kvalitet" %}: <span class="quality" id="{{ product.article.quality }}">{{ product.article.quality }}</span> </div> 
						
		</div> 

		<hr>
		<span> {% trans "Detaljer" %} :  {{ product.article.quality.description }} </span> 
      
		</div> <!-- end span7 -->
	</div> <!-- end span12 -->

<div class="span12" > 
	<hr/>
	<strong>Fler produkter av {{ product.article.name }} </strong>  
	<hr/>
	{% for product in products %}
	<div class='image_wrapper'>
		<a href="/products/{{product.pk}}">
		    {% with product.image_set.all|first as image %}
		         <div class="collection_list img_container" >
		        <img src="{% version image.image 'medium' %}" alt="{{ product.article.name }}"  />
		        <br/>
		        <div>
		            {{ product.article.name }}<br/>
		            {% trans "Pris" %} :
		            {%if product.article.discount%}
		                <span class="discount"> {{ product.article.f_discount }} </span> ({{ product.article.price }}) SEK
		            {%else%}
		                {{ product.article.price }} SEK
		            {%endif%}
		        </div>
		    </div>
		    {% endwith %}
		</a>
	
	</div>
	{% endfor %}

</div>
</div>
{{ product.article.quality.order }}
{% endblock %}
